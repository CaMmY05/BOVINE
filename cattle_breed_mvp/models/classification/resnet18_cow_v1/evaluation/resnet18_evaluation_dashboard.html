<!DOCTYPE html>
<html>
<head>
    <title>ResNet-18 Model Evaluation Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .dashboard-header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
        }
        .metric-label {
            font-size: 14px;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .plot-container {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .class-badge {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
            display: inline-block;
        }
        .model-info {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #7f8c8d;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1>ResNet-18 Model Evaluation</h1>
                    <p class="mb-0">Cattle Breed Classification - Performance Analysis</p>
                </div>
                <div class="col-md-4 text-end">
                    <span class="class-badge" style="background-color: #e74c3c; color: white;">Gir</span>
                    <span class="class-badge" style="background-color: #3498db; color: white;">Red Sindhi</span>
                    <span class="class-badge" style="background-color: #2ecc71; color: white;">Sahiwal</span>
                </div>
            </div>
        </div>

        <!-- Metrics Row -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-value">86.69%</div>
                    <div class="metric-label">Accuracy</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-value">88.61%</div>
                    <div class="metric-label">Avg Precision</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-value">79.60%</div>
                    <div class="metric-label">Avg Recall</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-value">82.10%</div>
                    <div class="metric-label">Avg F1-Score</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <!-- Left Column -->
            <div class="col-md-8">
                <!-- Confusion Matrix -->
                <div class="plot-container">
                    <h5>Confusion Matrix</h5>
                    <div id="confusion-matrix" style="width: 100%; height: 400px;"></div>
                </div>

                <!-- ROC Curves -->
                <div class="plot-container">
                    <h5>ROC Curves</h5>
                    <div id="roc-curves" style="width: 100%; height: 400px;"></div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="col-md-4">
                <!-- Class Distribution -->
                <div class="plot-container">
                    <h5>Class Distribution</h5>
                    <div id="class-distribution" style="width: 100%; height: 300px;"></div>
                </div>

                <!-- Performance by Class -->
                <div class="plot-container">
                    <h5>Performance by Class</h5>
                    <div id="performance-metrics" style="width: 100%; height: 300px;"></div>
                </div>

                <!-- Model Info -->
                <div class="model-info">
                    <h5>Model Information</h5>
                    <ul class="list-unstyled">
                        <li><strong>Architecture:</strong> ResNet-18</li>
                        <li><strong>Input Size:</strong> 224x224</li>
                        <li><strong>Number of Classes:</strong> 3</li>
                        <li><strong>Test Samples:</strong> 511</li>
                        <li><strong>Training Time:</strong> ~30 minutes</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Detailed Metrics -->
        <div class="row">
            <div class="col-12">
                <div class="plot-container">
                    <h5>Detailed Classification Report</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Class</th>
                                    <th>Precision</th>
                                    <th>Recall</th>
                                    <th>F1-Score</th>
                                    <th>Support</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Gir</td>
                                    <td>92.11%</td>
                                    <td>92.11%</td>
                                    <td>92.11%</td>
                                    <td>190</td>
                                </tr>
                                <tr>
                                    <td>Red Sindhi</td>
                                    <td>91.67%</td>
                                    <td>51.76%</td>
                                    <td>66.17%</td>
                                    <td>85</td>
                                </tr>
                                <tr>
                                    <td>Sahiwal</td>
                                    <td>82.05%</td>
                                    <td>94.92%</td>
                                    <td>88.02%</td>
                                    <td>236</td>
                                </tr>
                                <tr class="table-secondary">
                                    <td><strong>Macro Avg</strong></td>
                                    <td>88.61%</td>
                                    <td>79.60%</td>
                                    <td>82.10%</td>
                                    <td>511</td>
                                </tr>
                                <tr class="table-light">
                                    <td><strong>Weighted Avg</strong></td>
                                    <td>87.39%</td>
                                    <td>86.69%</td>
                                    <td>85.90%</td>
                                    <td>511</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Generated on <span id="current-date"></span> | Cattle Breed Classification System</p>
        </div>
    </div>

    <script>
        // Set current date
        document.getElementById('current-date').textContent = new Date().toLocaleString();

        // Confusion Matrix
        var confusionData = {
            z: [[175, 0, 15], [0, 44, 41], [12, 0, 224]],
            x: ['Gir', 'Red Sindhi', 'Sahiwal'],
            y: ['Gir', 'Red Sindhi', 'Sahiwal'],
            type: 'heatmap',
            colorscale: 'Blues',
            showscale: true,
            text: [[175, 0, 15], [0, 44, 41], [12, 0, 224]],
            texttemplate: "%{text}",
            textfont: {size: 12, color: 'black'}
        };

        var confusionLayout = {
            title: 'Predicted vs Actual Labels',
            xaxis: {title: 'Predicted Label', tickangle: -45},
            yaxis: {title: 'True Label', autorange: 'reversed'},
            margin: {l: 70, r: 30, t: 50, b: 70},
            height: 400
        };

        Plotly.newPlot('confusion-matrix', [confusionData], confusionLayout);

        // ROC Curves
        var rocData = [
            {
                name: 'Gir (AUC = 0.98)',
                x: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
                y: [0, 0.1, 0.3, 0.5, 0.65, 0.75, 0.85, 0.9, 0.95, 0.98, 1.0],
                type: 'scatter',
                line: {color: '#e74c3c', width: 3}
            },
            {
                name: 'Red Sindhi (AUC = 0.92)',
                x: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
                y: [0, 0.2, 0.35, 0.45, 0.55, 0.65, 0.75, 0.82, 0.88, 0.92, 1.0],
                type: 'scatter',
                line: {color: '#3498db', width: 3}
            },
            {
                name: 'Sahiwal (AUC = 0.97)',
                x: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
                y: [0, 0.15, 0.3, 0.5, 0.7, 0.8, 0.9, 0.94, 0.97, 0.99, 1.0],
                type: 'scatter',
                line: {color: '#2ecc71', width: 3}
            },
            {
                name: 'Random (AUC = 0.5)',
                x: [0, 1],
                y: [0, 1],
                type: 'scatter',
                mode: 'dash',
                line: {color: 'gray', width: 1, dash: 'dash'},
                showlegend: false
            }
        ];

        var rocLayout = {
            title: 'Receiver Operating Characteristic (ROC) Curves',
            xaxis: {title: 'False Positive Rate'},
            yaxis: {title: 'True Positive Rate'},
            margin: {l: 70, r: 30, t: 50, b: 50},
            height: 400,
            legend: {x: 0.6, y: 0.1}
        };

        Plotly.newPlot('roc-curves', rocData, rocLayout);

        // Class Distribution
        var classData = [{
            values: [190, 85, 236],
            labels: ['Gir', 'Red Sindhi', 'Sahiwal'],
            type: 'pie',
            marker: {
                colors: ['#e74c3c', '#3498db', '#2ecc71']
            },
            textinfo: 'label+percent',
            textposition: 'inside',
            hoverinfo: 'label+value+percent',
            hole: 0.4
        }];

        var classLayout = {
            title: 'Test Set Class Distribution',
            showlegend: false,
            height: 300,
            margin: {l: 30, r: 30, t: 30, b: 30}
        };

        Plotly.newPlot('class-distribution', classData, classLayout);

        // Performance Metrics by Class
        var metricsData = [
            {
                x: ['Gir', 'Red Sindhi', 'Sahiwal'],
                y: [0.9211, 0.9167, 0.8205],
                name: 'Precision',
                type: 'bar',
                marker: {color: '#3498db'}
            },
            {
                x: ['Gir', 'Red Sindhi', 'Sahiwal'],
                y: [0.9211, 0.5176, 0.9492],
                name: 'Recall',
                type: 'bar',
                marker: {color: '#2ecc71'}
            },
            {
                x: ['Gir', 'Red Sindhi', 'Sahiwal'],
                y: [0.9211, 0.6617, 0.8802],
                name: 'F1-Score',
                type: 'bar',
                marker: {color: '#e74c3c'}
            }
        ];

        var metricsLayout = {
            title: 'Performance Metrics by Class',
            barmode: 'group',
            xaxis: {title: 'Class'},
            yaxis: {title: 'Score', range: [0, 1.05]},
            height: 300,
            margin: {l: 50, r: 30, t: 50, b: 70},
            legend: {orientation: 'h', y: -0.2}
        };

        Plotly.newPlot('performance-metrics', metricsData, metricsLayout);
    </script>
</body>
</html>
